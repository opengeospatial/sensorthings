[[overview1]]
== SensorThings API overview


[[who-should-use]]
=== Who should use the OGC SensorThings API


Organizations that need web-based platforms to manage, store, share, and analyze real-time sensor observation data should use the OGC SensorThings API.
The OGC SensorThings API simplifies and accelerates the development of modern location enabled digital monitoring and control applications.
Application developers can use this open standard to connect to various sensor devices and create innovative applications without worrying about the daunting heterogeneous protocols of the disparate vendor hardware including gateways and services.
Sensor device manufacturers can also use OGC SensorThings API as the API can be embedded within various hardware and software platforms, thus allowing the various sensing devices to effortlessly connect with the OGC Standard-compliant servers around the world.

While the OGC SensorThings API was initially designed with IoT applications in mind, it has proven valuable for many non-IoT use cases as well:

* Environmental Monitoring: Managing data from fixed monitoring stations for air quality, water quality, weather, and climate observations that may not be considered traditional IoT devices

* Scientific Research: Handling laboratory measurements, experimental data, and field observations where standardized data management and interoperability are crucial

* Urban Planning, Smart Cities & Digital Twins: Urban planners & municipal corporations can use the API to monitor various environmental and infrastructure metrics, like noise levels, pollution, or green space usage, helping with sustainable city planning. Large buildings or campuses can have digital twins that track HVAC systems, lighting, occupancy, occupancy status and safety conditions. SensorThings API allows for efficient, standardized data collection from these disparate systems.

* Historical Data Archives: Providing standardized access to historical observation datasets 

* Citizen Science: Supporting data collection and management from volunteer observers and manual measurements

* Regulatory Compliance: Managing environmental compliance for monitoring data from both automated and manual sampling programs

In summary, the OGC SensorThings API is transforming the numerous disjointed networked sensor systems into a fully connected platform where complex tasks can be synchronized and performed.
The flexible data model and powerful query capabilities make SensorThings API suitable for any application involving time-series observations, regardless of whether networked sensor devices are involved.

[[benefits]]
=== Benefits of the OGC SensorThings API

In today's world, most IoT devices (e.g., sensors and actuators) have proprietary software interfaces defined by their manufacturers and used selectively.
New APIs are often required and developed on an as-needed basis, often in an environment with resource limitations and associated risks.
This situation requires significant investment on the part of developers for each new sensor or project involving multiple systems and on the part of the providers of sensors, gateways, and portals or services where observations and measurements are required.

As a standardized data model and interface for sensors in the WoT and IoT, the OGC SensorThings API offers the following key benefits:

1. *Interoperability and Integration*
- Enables seamless integration between different sensor systems, platforms, and applications
- Reduces vendor lock-in by providing a standardized interface
- Facilitates data exchange across organizational boundaries and domains

2. *Cost and Time Efficiency*
- Lowers development costs through standardized implementation patterns
- Reduces time-to-market for IoT solutions
- Minimizes the need for custom interface development
- Simplifies maintenance and updates across the system

3. *Scalability and Flexibility*
- Supports both small-scale deployments and large enterprise solutions
- Adapts to various use cases from environmental monitoring to smart cities
- Enables easy addition of new sensors and data sources
- Supports both real-time and historical data management

4. *Data Quality and Governance*
- Provides consistent metadata management
- Ensures data provenance through standardized observation tracking
- Supports regulatory compliance through structured data handling
- Enables better data discovery and reuse

5. *Modern Web-GIS Support*
- Aligns with REST architectural principles
- Supports cloud-native deployments
- Enables edge computing scenarios

6. *Enhanced Analytics and Innovation*
- Simplifies data integration for analytics and AI/ML applications
- Enables standardized access to historical datasets
- Supports real-time monitoring and alerting
- Facilitates development of innovative applications and services

These benefits make the OGC SensorThings API particularly valuable in today's rapidly evolving digital landscape, where organizations increasingly rely on sensor data for decision-making and automation.

[[overview2]]
=== SensorThings API Overview

The OGC SensorThings API data model consists of three main parts:
(1) the Sensing part,
(2) the Sampling part and
(3) the Tasking part.
Additionally, SensorThings API supports the following two extensions to the data model:
(1) the Sensing Extension (Observations & Measurements) and
(2) the Relations extension

The Sensing part allows sensor devices and applications to CREATE, READ, UPDATE, and DELETE (__i.e.__, HTTP POST, GET, PATCH, and DELETE) data and metadata in a SensorThings service.
The Sensing part is designed based on the OGC/ISO Observation, Measurements and Samples (OMS) model [OGC 20-004r3 and ISO 19156:2023].

An Observation is modeled as an act that produces a result whose value is an estimate of a property of a given Feature.

An Observation instance is characterized by its event time (e.g., resultTime and phenonmenonTime), Feature, ObservedProperty, and the procedure used (often a Sensor).

Moreover, Things are also modeled in the SensorThings API. A Thing draws from the same concept as a Host in OMS where a Host is defined as a collection of Observers (defined as Sensor in SensorThings API).
Formally, its definition follows the ITU-T definition:
“__an object of the physical world (physical things) or the information world (virtual things) that is capable of being identified and integrated into communication networks__” [ITU-T Y.2060].

The geographical Locations of Things are useful in almost every application and as a result are included as well.
For the Things whose location changed, the HistoricalLocations entities offer the history of the Thing’s locations.

A Thing also can have multiple Datastreams. A Datastream is a collection of Observations grouped by the same ObservedProperty, Sensor and optionally by Feature and ObservingProcedure.

An Observation is an event performed by a Sensor that produces a result whose value is an estimate of an ObservedProperty of any given Feature which may be a proximate or ultimate FeatureofInterest.
Details of each above described entity are provided in <<sensing-core>>.


[[observations-measurements]]
=== SensorThings API and Relation to ISO/OGC Observations, Measurements and Samples

Managing and retrieving observations and metadata from IoT sensor systems is one of the most common use cases.
As a result, SensorThings API's sensing part is designed based on the OMS model.
OMS defines models for the exchange of information describing observation acts, their results as well as the feature involved in sampling when making observations.


SensorThings API defines nine entities for the IoT sensing applications and several additional entities in various extensions.
<<sta-oms-compare>> lists each component and its relationship with OMS.
SensorThings API uses the term of Sensor to describe the Observer that is used in generating an Observation, instead of using OMS’ term of Observer.


[#sta-oms-compare,reftext='{table-caption} {counter:table-num}']
.SensorThings API Sensing entities and equivalent concepts in the Observations, Measurements and Samples standard
[cols="10a,10a",options="header"]
|===
| SensorThings API Entities | OMS Concepts

|Thing 
|Host

|Datastream
|ObservationCollection, ObservingCapability

|Sensor
|Observer

|Observation
|Observation

|ObservedProperty
|Observed Property

|Feature
|Feature

|Deployment (OM Extension)
|Deployment

|ObservingProcedure (OM Extension)
|Observing Procedure

|Sample (Sampling Extension)
|Sample

|Sampling (Sampling Extension)
|Sampling

|SamplingProcedure (Sampling Extension)
|Sampling Procedure

|PreparationProcedure (Sampling Extension)
|Preparation Procedure

|PreparationStep (Sampling Extension)
|Preparation Step

|===


[[revision-differences]]
=== SensorThings API 2.0 changes from 1.1

From the SensorThings API version 1.1 to 2.0 changes have been made to both the data model and the API.
The changes to the data model have been summarised in <<sta-changes>> and <<img-sta-core-changed>>.

[#sta-changes,reftext='{table-caption} {counter:table-num}']
.Changes in the SensorThings API 2.0 data model compared to v1.1
[width="100%",cols="4,20a",options="header"]
|====
| *Entity*
| *Changes* 

| All
|
- `@iot.id` is renamed to `id`
- `@iot.selfLink` is renamed to `@id`, to match OData 4.01
- All `@iot.navigationLink` are renamed to `@navigationLink`, to match OData 4.01
- `@iot.nextLink` is renamed to `@nextLink` to match OData 4.01

| Sensor
|
- `description` attribute is now optional and not mandatory
- `definition` attribute added

| Thing
|
- `description` attribute is now optional and not mandatory
- `definition` attribute added

| Location
| 
- `description` attribute is now optional and not mandatory
- For a Thing having multiple Locations, these Locations MAY be in same encodingTypes OR the encodingTypes MAY be in different spaces (e.g., one encodingType in Geometrical space and one encodingType in Topological space).
- `definition` attribute added

| Datastream
| 
- `description` attribute is now optional and not mandatory 
- `resultType` replaces the `observationType` attribute, this eliminates MultiDatastream entity
- unitOfMeasurement SHALL be embedded within the observedType attribute and does not exist as an independent attribute within the Datastream entity
- A Datastream can link to multiple ObservedProperties which was only possible with MultiDatastream entity earlier.
  The SWE-Common based `resultType` attribute eliminates the need for having a separate MultiDatastream entity
- A Datastream can now be linked to the Feature it observes as an optional link, named UltimateFeatureOfInterest, between Datastream and Feature is introduced
- `definition` attribute added

| ObservedProperty
| `description` attribute is now optional and not mandatory

| Observation
| 
- `properties` replaces the `parameters` attribute.
- An Observation may or may not link to any Feature in contrast to the mandatory link between Observation and FeatureOfInterest from v1.x.
- `resultTime` is now optional and can be left out completely, instead of defaulting to a `null` value.

| Feature
| 
- The Feature entity replaces the FeatureOfInterest entity from 1.x as it now takes the role of UltimateFeatureOfInterest or ProximateFeatureOfInterest depending upon the context and links with Observation and Datastream entities
- `definition` attribute added

| FeatureType
| The FeatureType entity is added, and makes it easier to handle type information for Features
|====

[#img-sta-core-changed,link=figures/Datamodel-SensorThingsApi-V2-Core-changed.drawio.png, reftext='{figure-caption} {counter:figure-num}', title='Sensing Core Changes']
image::figures/Datamodel-SensorThingsApi-V2-Core-changed.drawio.png[Sensing Core Changes, align="center"]


=== Relation to OASIS-OData

OData is an API standard for exchanging relational data.
It allows for the definition of a consistent REST API on any relational data model.
OData specifies how clients can inspect the data model and how they can perform Create, Read, Update and Delete actions.
OData comes with a very powerful query language that allows users to compose the response to queries such that only a minimal number of queries is required to fetch needed data, regardless of the use case of the client.
The OData specification also defines filtering mechanisms that allows filtering across relations.
OData uses JSON-encoding by default, and specifies generic rules for encoding relational data models in JSON.

The OGC SensorThings API v2 interface is not an OData interface and does not claim to be an OData service. 
It specifies a subset of the OData 4.01 specification, and extends it at the same time with certain features optimized for accessing sensor data.
A SensorThings API Server implementation can implement the full OData specification. An OData client can access a SensorThings API service.

EDITOR: Check if this is true
